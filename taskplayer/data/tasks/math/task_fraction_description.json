{
  "task_id": "task_fraction_description",
  "template_id": "template_fill_in_the_blank",
  "title": {
    "english": "Describe the Fraction 1",
    "german": "Beschreibe den Bruch 1"
  },
  "description": {
    "english": "The student has to fill in the blanks with appropriate terms and numbers to describe the fraction.",
    "german": "Der Schüler muss die Lücken mit passenden Begriffen und Zahlen füllen, um den Bruch zu beschreiben."
  },
  "topic_id": 16,
  "events": {
    "send": ["evaluationResult", "task_details", "task_loaded"],
    "receive": ["evaluate", "refresh", "get_task_details"]
  },
  "text": {
    "text_question": {
      "english": "Fill in the blanks.",
      "german": "Fülle die Lücken aus."
    },
    "nom_2": {
      "german": "zwei",
      "english": "two"
    },
    "denom_2": {
      "german": "halbe",
      "english": "half"
    },
    "nom_3": {
      "german": "drei",
      "english": "three"
    },
    "denom_3": {
      "german": "drittel",
      "english": "third"
    },
    "nom_4": {
      "german": "vier",
      "english": "four"
    },
    "denom_4": {
      "german": "viertel",
      "english": "quarter"
    },
    "nom_5": {
      "german": "fünf",
      "english": "five"
    },
    "denom_5": {
      "german": "fünftel",
      "english": "fifth"
    },
    "nom_6": {
      "german": "sechs",
      "english": "six"
    },
    "denom_6": {
      "german": "sechstel",
      "english": "sixth"
    },
    "nom_7": {
      "german": "sieben",
      "english": "seven"
    },
    "denom_7": {
      "german": "siebtel",
      "english": "seventh"
    },
    "nom_8": {
      "german": "acht",
      "english": "eight"
    },
    "denom_8": {
      "german": "achtel",
      "english": "eighth"
    },
    "nom_9": {
      "german": "neun",
      "english": "nine"
    },
    "denom_9": {
      "german": "neuntel",
      "english": "ninth"
    },
    "nom_10": {
      "german": "zehn",
      "english": "ten"
    },
    "denom_10": {
      "german": "zehntel",
      "english": "tenth"
    },
    "nom_11": {
      "german": "elf",
      "english": "eleven"
    },
    "denom_11": {
      "german": "elftel",
      "english": "eleventh"
    },
    "nom_12": {
      "german": "zwölf",
      "english": "twelve"
    },
    "denom_12": {
      "german": "zwölftel",
      "english": "twelfth"
    },
    "write_it_like_this": {
      "german": "Man schreibt es so:",
      "english": "It is written like this:"
    },
    "say_it_like_this": {
      "german": "Man spricht es so:",
      "english": "It is spoken like this:"
    },
    "denominator_description": {
      "german": "sagt, in wie viele gleich große Teile man die Schokolade teilt.",
      "english": "says into how many equal parts the chocolate is divided."
    },
    "numerator_description": {
      "german": "gibt an, wie viele dieser Teile man davon nimmt.",
      "english": "indicates how many of these parts are taken."
    },
    "the": {
      "german": "Die",
      "english": "The"
    }
  },
  "script": "let correctAnswers;\nconst { questionElement, imagePlaceholder, fillInTheBlankContainer } = playerApi.callTemplateScript('createLayout', {});\n\nconst numberWords = {\n  2: { nominator: \"{{nom_2}}\", denominator: \"{{denom_2}}\" },\n  3: { nominator: \"{{nom_3}}\", denominator: \"{{denom_3}}\" },\n  4: { nominator: \"{{nom_4}}\", denominator: \"{{denom_4}}\" },\n  5: { nominator: \"{{nom_5}}\", denominator: \"{{denom_5}}\" },\n  6: { nominator: \"{{nom_6}}\", denominator: \"{{denom_6}}\" },\n  7: { nominator: \"{{nom_7}}\", denominator: \"{{denom_7}}\" },\n  8: { nominator: \"{{nom_8}}\", denominator: \"{{denom_8}}\" },\n  9: { nominator: \"{{nom_9}}\", denominator: \"{{denom_9}}\" },\n  10: { nominator: \"{{nom_10}}\", denominator: \"{{denom_10}}\" },\n  11: { nominator: \"{{nom_11}}\", denominator: \"{{denom_11}}\" },\n  12: { nominator: \"{{nom_12}}\", denominator: \"{{denom_12}}\" }\n};\n\nlet numerator, denominator;\n\nfunction generateExercise() {\n  numerator = Math.floor(Math.random() * 11) + 2;\n  denominator = Math.floor(Math.random() * 11) + 2;\n\n  correctAnswers = {\n    'fraction': [\n      `${numberWords[numerator].nominator} ${numberWords[denominator].denominator}`,\n      `${numerator}/${denominator}`\n    ],\n    'denominator': [denominator.toString(), numberWords[denominator].nominator],\n    'numerator': [numerator.toString(), numberWords[numerator].nominator]\n  };\n\n  questionElement.innerHTML = \"{{text_question}}\";\n questionElement.setAttribute('text_map', 'text_question');\n  const content = `\n    <div>{{write_it_like_this}} <sup>${numerator}</sup>&frasl;<sub>${denominator}</sub></div>\n    <div>{{say_it_like_this}} <input type='text' id='fraction' class='blank'>.</div>\n    <div>\"{{the}} <input type='text' id='denominator' class='blank'> {{denominator_description}}</div>\n    <div>{{the}} <input type='text' id='numerator' class='blank'> {{numerator_description}}</div>\n  `;\n  fillInTheBlankContainer.innerHTML = content;\n  playerApi.sendEvent('task_loaded', {});\n}\n\nfunction normalizeAnswer(answer) {\n  return answer.trim().toLowerCase();\n}\n\nfunction init() {\n  playerApi.receiveEvent('get_task_details', function() {\n    const taskDetails = playerApi.getTaskDetails();\n    const dynamicDetails = `The task requires filling in the blanks correctly to describe the fraction ${numerator}/${denominator}.`;\n    playerApi.sendEvent('task_details', {\n      staticInfo: taskDetails.description,\n      dynamicDetails: dynamicDetails\n    });\n  });\n\n  playerApi.receiveEvent('evaluate', function() {\n    const userAnswers = {\n      'fraction': normalizeAnswer(document.getElementById('fraction').value),\n      'denominator': normalizeAnswer(document.getElementById('denominator').value),\n      'numerator': normalizeAnswer(document.getElementById('numerator').value)\n    };\n    console.log(userAnswers);\n    console.log(correctAnswers);\n    const isCorrect = Object.keys(correctAnswers).every(key => {\n      return correctAnswers[key].includes(userAnswers[key]);\n    });\n    playerApi.sendEvent('evaluationResult', { userAnswers, correctAnswers, isCorrect });\n  });\n\n  playerApi.receiveEvent('refresh', function() {\n    fillInTheBlankContainer.innerHTML = '';\n    generateExercise();\n  });\n}\n\ninit();\ngenerateExercise();"
}
