{
    "task_id": "task_pizza_sharing",
    "template_id": "template_multiple_choice_multi_select",
    "title": {
      "english": "Pizza Sharing Task",
      "german": "Pizza-Teilungsaufgabe"
    },
    "topic_id": 16,
    "description": {
      "english": "The student has to identify the correct statements about sharing a pizza cut into 6 equal pieces. Multiple choices can be correct. The task contains a question element, an optional image placeholder showing a pizza divided into 6 equal pieces, and multiple choice elements with checkboxes. The student has to check the correct checkboxes. Multiple answers can be true. The task is only marked as solved if all of the correct answers are checked and no wrong answers are checked.",
      "german": "Der Schüler muss die richtigen Aussagen über das Teilen einer Pizza, die in 6 gleich große Stücke geschnitten ist, identifizieren. Mehrere Auswahlen können korrekt sein. Die Aufgabe enthält ein Fragensymbol, einen optionalen Bildplatzhalter, der eine in 6 gleich große Stücke geteilte Pizza zeigt, und mehrere Auswahlmöglichkeiten mit Kontrollkästchen. Der Schüler muss die richtigen Kontrollkästchen ankreuzen. Mehrere Antworten können richtig sein. Die Aufgabe gilt nur dann als gelöst, wenn alle richtigen Antworten angekreuzt sind und keine falschen Antworten angekreuzt sind."
    },
    "events": {
      "send": ["evaluationResult", "task_details", "task_loaded"],
      "receive": ["evaluate", "refresh", "get_task_details", "choices_selected"]
    },
    "text": {
      "text_question": {
        "english": "Anna wants to share a pizza with her five friends. She cuts it into equal pieces. What is correct?",
        "german": "Anna möchte eine Pizza mit ihren fünf Freundinnen teilen. Sie schneidet sie in gleich große Stücke. Was ist richtig?"
      },
      "choice1": {
        "english": "The pizza was divided into six pieces.",
        "german": "Die Pizza wurde in sechs Stücke geteilt."
      },
      "choice2": {
        "english": "You can fairly share the pizza among six people.",
        "german": "Man kann die Pizza gerecht auf sechs Personen verteilen."
      },
      "choice3": {
        "english": "Four pieces make up half a pizza.",
        "german": "Vier der Stücke ergeben eine halbe Pizza."
      },
      "choice4": {
        "english": "You need at least six cuts to divide the pizza this way.",
        "german": "Man braucht mindestens sechs Schnitte, um die Pizza so aufzuteilen."
      },
      "choice5": {
        "english": "Each girl gets one-sixth of the pizza.",
        "german": "Jedes Mädchen bekommt ein Sechstel der Pizza."
      }
    },
    "script": "let selectedChoices = [];\n\n// Create the layout using the template's method\n// Note: imagePlaceholder is optional and can be left unchanged if no image is needed\nconst { questionElement, imagePlaceholder, choiceElements } = playerApi.callTemplateScript('createLayout', { choices: 5, choicesData: ['{{choice1}}', '{{choice2}}', '{{choice3}}', '{{choice4}}', '{{choice5}}'] });\n\n// Set the question text using the variable\nquestionElement.innerHTML = '{{text_question}}';\n questionElement.setAttribute('text_map', 'text_question'); \n// Create and configure the image element\nconst img = document.createElement('img');\nimg.src = '/media/pizza_FO5M3iJ.png';\nimg.alt = 'Pizza divided into 6 equal pieces';\nimagePlaceholder.appendChild(img);\n\n// Function to initialize event listeners\nfunction init() {\n  // Listener for getting task details\n  playerApi.receiveEvent('get_task_details', function() {\n    playerApi.sendEvent('task_details', {\n      staticInfo: playerApi.getTaskDetails().description,\n      dynamicDetails: 'Each piece of pizza represents one-sixth since the pizza is divided into 6 equal pieces. Correct answers are: [0, 1, 4]. Possible choices are: [\"{{choice1}}\", \"{{choice2}}\", \"{{choice3}}\", \"{{choice4}}\", \"{{choice5}}\"].'\n    });\n  });\n\n  // Listener for evaluating the task\n  playerApi.receiveEvent('evaluate', function() {\n    const isCorrect = selectedChoices.length === 3 && selectedChoices.every(id => [0, 1, 4].includes(id));\n    playerApi.sendEvent('evaluationResult', {\n      userInput: selectedChoices,\n      result: [0, 1, 4],\n      isCorrect: isCorrect\n    });\n  });\n\n  // Listener for refreshing the task\n  playerApi.receiveEvent('refresh', function() {\n    // Uncheck all checkboxes and clear selectedChoices array\n    choiceElements.forEach(choice => choice.querySelector('input').checked = false);\n    selectedChoices = [];\n  });\n\n  // Listener for handling selected choices\n  playerApi.receiveEvent('choices_selected', function(event) {\n    selectedChoices = event.map(choice => choice.id);\n  });\n}\n\n// Initialize and generate the exercise\ninit();"
  }
  