{
  "task_id": "task_square_root",
  "template_id": "template_question_answer",
  "title": {
    "english": "Square Root",
    "german": "Quadratwurzel"
  },
  "description": {
    "english": "The student sees a mathematical term in which they have to calculate the square root of a square number.",
    "german": "Der Sch√ºler sieht einen mathematischen Ausdruck, in dem er die Quadratwurzel einer quadratischen Zahl berechnen muss."
  },
  "topic_id": 32,
  "events": {
    "send": ["evaluationResult", "task_details", "task_loaded"],
    "receive": ["evaluate", "refresh", "get_task_details"]
  },
  "text": {
    "text_question": {
      "english": "Find the square root.",
      "german": "Bestimme die Quadratwurzel."
    }
  },
  "script": "let answer;\n\n// Create the layout using the template's method\n// Note: imagePlaceholder is not used in this task and will remain unchanged\nconst { questionElement, imagePlaceholder, answerElement } = playerApi.callTemplateScript('createLayout', {});\n\n// Function to generate the exercise\nfunction generateExercise() {\n  // Generate a random number between 2 and 10\n  do {\n    answer = Math.floor(Math.random() * 9) + 2;\n  } while (answer === 0);\n\n  // Create the equation string\n  const equation = `\\\\sqrt{${answer ** 2}} = \\\\placeholder[answer]{}`;\n\n  // Set the question text using the variable\n  questionElement.innerText = \"{{text_question}}\";\n\n  // Create and configure the answer field\n  const answerField = document.createElement(\"math-field\");\n  answerField.id = \"equation\";\n  answerField.className = 'w-48';\n  answerField.setValue(equation);\n  answerField.mathVirtualKeyboardPolicy = \"manual\";\n  answerField.readonly = true;\n\n  // Append the answer field to the answer element\n  answerElement.append(answerField);\n\n  // Send a task loaded event\n  playerApi.sendEvent('task_loaded', {});\n}\n\n// Function to initialize event listeners\nfunction init() {\n  // Listener for getting task details\n  playerApi.receiveEvent('get_task_details', function() {\n    const taskDetails = playerApi.getTaskDetails();\n    const dynamicDetails = `The current exercise is to find the square root of ${answer ** 2}. Therefore, the correct answer is ${answer}.`;\n    playerApi.sendEvent('task_details', {\n      staticInfo: taskDetails.description,\n      dynamicDetails: dynamicDetails\n    });\n  });\n\n  // Listener for evaluating the task\n  playerApi.receiveEvent('evaluate', function() {\n    const userAnswer = parseInt(document.getElementById('equation').getPromptValue('answer'), 10);\n    const isCorrect = userAnswer === answer;\n    playerApi.sendEvent('evaluationResult', { userAnswer, answer, isCorrect });\n  });\n\n  // Listener for refreshing the task\n  playerApi.receiveEvent('refresh', function() {\n    answerElement.innerHTML = '';\n    questionElement.innerHTML = '';\n    generateExercise();\n  });\n}\n\n// Initialize and generate the exercise\ninit();\ngenerateExercise();"
}
